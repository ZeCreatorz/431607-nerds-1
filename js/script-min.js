var contactLink=document.querySelector(".contact-button"),contactPopup=document.querySelector(".modal"),contactForm=contactPopup.querySelector(".contact-form"),closeButton=contactPopup.querySelector(".modal-close"),nameField=contactForm.querySelector("[name=name]"),emailField=contactForm.querySelector("[name=email]"),textField=contactForm.querySelector("[name=textarea]"),isStorageSupport=!0,nameFieldStorage="",emailFieldStorage="";try{nameFieldStorage=localStorage.getItem("name"),emailFieldStorage=localStorage.getItem("email")}catch(e){isStorageSupport=!1}contactLink.addEventListener("click",function(e){e.preventDefault(),contactPopup.classList.add("modal-show"),nameFieldStorage&&emailFieldStorage?(nameField.value=nameFieldStorage,emailField.value=emailFieldStorage,textField.focus()):nameField.focus()}),closeButton.addEventListener("click",function(e){e.preventDefault(),contactPopup.classList.remove("modal-error"),contactPopup.classList.remove("modal-show")}),contactForm.addEventListener("submit",function(e){nameField.value&&emailField.value&&textField.value?isStorageSupport&&(localStorage.setItem("name",nameField.value),localStorage.setItem("email",emailField.value)):(e.preventDefault(),contactPopup.classList.remove("modal-error"),contactPopup.offsetWidth=contactPopup.offsetWidth,contactPopup.classList.add("modal-error"),console.log(nameField.value),console.log(emailField.value),console.log(textField.value))}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),contactPopup.classList.contains("modal-show")&&(contactPopup.classList.remove("modal-show"),contactPopup.classList.remove("modal-error")))});